{"version":3,"sources":["uploadImage.jsx"],"names":["UploadImages","arguments","state","previewVisible","previewImage","uploadMess","props","id","Date","getTime","showMaodal","url","width","setState","modalwiddth","deleteFile","file","document","getElementById","value","length","map","item","index","splice","onChange","handleCancel","changeV","preval","now","aliurl","handleFileChange","fileReader","FileReader","onload","e","dataURL","target","result","imgSrc","editImageModalVisible","readAsDataURL","selectedImageFile","uploadImags","event","files","console","log","test","type","message","error","cropper","pRadio","radio","mess","toFixed","datas","split","left","Number","right","img","Image","w","h","height","startLoading","uploadImagsAli","src","data","push","fail","clientOss","self","fileO","name","ownName","key","keyOss","then","res","resultAliUrl","requestUrls","successIndex","failIndex","uploadImageElement","natureSizeWidth","natureSizeHeight","borderColor","overflow","disabled","nextProps","toString","showWidth","body","clientWidth","limit","limituploadMess","aspectRatio","modalProps","modalVisible","handleAdd","fileCrop","urls","coperurl","handleModalVisible","tips","maxWidth","Component"],"mappings":"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","sourcesContent":["/**\n *\n * @authors zcy (1366969408@qq.com)\n * @date    2018-03-20 16:52:27\n * @version $Id$\n */\nimport React, { Component } from \"react\";\nimport \"./style.less\";\nimport { Modal, message, Icon } from \"antd\";\nimport { uploadFile, getObjectURL } from \"./common\";\nimport ImageModal from \"./ImageModal\";\nclass UploadImages extends Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            previewVisible: false,\n            previewImage: null,\n            uploadMess: this.props.uploadMess || [],\n            id: new Date().getTime() + (this.props.id || \"CC1\")\n        };\n        this.showMaodal = (url, width) => {\n            this.setState({\n                previewVisible: true,\n                previewImage: url,\n                modalwiddth: width\n            });\n        };\n        this.deleteFile = (url) => {\n            var file = document.getElementById(this.state.id);\n            if (file) {\n                file.value = \"\";\n            }\n            if (this.state.uploadMess && this.state.uploadMess.length > 0) {\n                this.state.uploadMess.map((item, index) => {\n                    if (item.url == url) {\n                        this.state.uploadMess.splice(index, 1);\n                        this.setState({\n                            uploadMess: this.state.uploadMess\n                        }, () => {\n                            this.props.onChange(null);\n                        });\n                        return;\n                    }\n                });\n            }\n            //this.props.deleteFile(url)\n        };\n        this.handleCancel = () => {\n            this.setState({\n                previewVisible: false\n            });\n        };\n        this.changeV = (preval, now) => {\n            if (!preval && now[0].aliurl) {\n                this.props.onChange(now);\n            }\n            if (preval && now) {\n                if (preval[0] && now[0] && now[0].aliurl != preval[0].aliurl) {\n                    this.props.onChange(now);\n                }\n            }\n        };\n        this.handleFileChange = (file) => {\n            if (file) {\n                const fileReader = new FileReader();\n                fileReader.onload = (e) => {\n                    const dataURL = e.target.result;\n                    this.setState({ imgSrc: dataURL }, () => {\n                        this.setState({\n                            editImageModalVisible: true\n                        });\n                    });\n                };\n                fileReader.readAsDataURL(file);\n                this.setState({\n                    selectedImageFile: file\n                });\n            }\n        };\n        this.uploadImags = (event) => {\n            let uploadMess = this.state.uploadMess;\n            var file = event.target.files[0];\n            console.log(uploadMess);\n            console.log(\"filefilefilefilefile\");\n            console.log(file);\n            if (!/\\/(gif|jpg|jpeg|bmp|png)$/.test(file.type)) {\n                message.error(\"只能上传图片\");\n                return;\n            }\n            // 添加判断条件 截图插件追加   cropper=true\n            if (this.props.cropper) {\n                //截图上传逻辑\n                this.handleFileChange(file);\n                return;\n            }\n            let url = getObjectURL(file);\n            let pRadio = this.props.radio;\n            //图片比例 可有可无  参数形式 '宽/高'\n            if (pRadio) {\n                let mess = \"请上传比例为\" + pRadio + \"的图片！\";\n                let radio;\n                if (pRadio == \"square\") {\n                    mess = \"请上传比例为1:1的图片\";\n                    radio = 1;\n                }\n                else if (pRadio == \"wide\") {\n                    mess = \"请上传比例为16:9的图片\";\n                    radio = (16 / 9).toFixed(2);\n                }\n                else {\n                    let datas = pRadio.split(\"/\");\n                    if (datas && datas.length == 2) {\n                        let left = Number(datas[0]) * 1;\n                        let right = Number(datas[1]) * 1;\n                        radio = (left / right).toFixed(2);\n                    }\n                }\n                let img = new Image();\n                img.onload = () => {\n                    let w = img.width;\n                    let h = img.height; //获取图片原始尺寸\n                    if ((w / h).toFixed(2) != radio) {\n                        message.error(mess);\n                        return;\n                    }\n                    if (url) {\n                        this.startLoading(uploadMess, url);\n                    }\n                    if (file) {\n                        this.uploadImagsAli(file, uploadMess);\n                    }\n                };\n                img.src = url;\n            }\n            else {\n                if (url) {\n                    this.startLoading(uploadMess, url);\n                }\n                if (file) {\n                    this.uploadImagsAli(file, uploadMess);\n                }\n            }\n        };\n        this.startLoading = (uploadMess, url) => {\n            let data = [];\n            if (uploadMess) {\n                uploadMess.push({ url: url, fail: \"loading\" });\n                data = uploadMess;\n            }\n            else {\n                data.push({ url: url, fail: \"loading\" });\n            }\n            uploadMess = data;\n            this.setState({\n                uploadMess: uploadMess\n            }, () => {\n                // this.props.onChange(uploadMess)\n            });\n        };\n        this.uploadImagsAli = (file, uploadMess) => {\n            if (!this.props.clientOss) {\n                message.error(\"没有阿里上传的凭证,请先获取\");\n                return;\n            }\n            if (file) {\n                const self = this;\n                const fileO = file.name.split(\".\");\n                let ownName = fileO[fileO.length - 1];\n                const key = this.props.keyOss + \"/\" + new Date().getTime() + \".\" + ownName; //+file.name  随机名称\n                //const key = this.props.keyOss+\"/\"+(new Date()).getTime()+file.name;\n                console.log(\"上传啊\");\n                uploadFile(file, this.props.clientOss, key, uploadMess.length).then((res) => {\n                    console.log(122222222222222222222);\n                    console.log(res);\n                    let resultAliUrl = res.res.requestUrls[0];\n                    let successIndex = res.successIndex;\n                    if (uploadMess && uploadMess.length > 0) {\n                        uploadMess.map((item, index) => {\n                            if (index == successIndex - 1) {\n                                //上传成功\n                                uploadMess[index].fail = \"false\";\n                                uploadMess[index].aliurl = resultAliUrl;\n                                self.setState({\n                                    uploadMess: uploadMess\n                                });\n                                this.props.onChange(uploadMess);\n                                return;\n                            }\n                        });\n                    }\n                    self.setState({\n                        uploadMess: uploadMess\n                    });\n                }, function (error) {\n                    console.log(\"失败了？？？ \");\n                    console.log(error);\n                    let failIndex = error.failIndex; //第几个\n                    if (uploadMess && uploadMess.length > 0) {\n                        uploadMess.map((item, index) => {\n                            if (index == failIndex - 1) {\n                                //上传失败\n                                uploadMess[index].fail = \"true\";\n                                self.setState({\n                                    uploadMess: uploadMess\n                                });\n                                return;\n                            }\n                        });\n                    }\n                });\n            }\n            // uploadMess\n        };\n        this.uploadImageElement = (uploadMess) => {\n            console.log(uploadMess);\n            /// this.props.onChange(uploadMess)\n            if (uploadMess && uploadMess.length > 0) {\n                return uploadMess.map((item, index) => {\n                    console.log(\"itemitemitemitem\");\n                    console.log(item);\n                    let img = new Image();\n                    let natureSizeWidth = img.width;\n                    let natureSizeHeight = img.height;\n                    img.onload = function () {\n                        natureSizeWidth = img.width;\n                        natureSizeHeight = img.height; //获取图片原始尺寸 　console.log(w + \"  \" + h)\n                    };\n                    img.src = item.url;\n                    let mess = \"\";\n                    if (item.fail == \"loading\") {\n                        mess = \"上传中\";\n                    }\n                    if (item.fail == \"true\") {\n                        mess = \"上传失败\";\n                    }\n                    return (<div key={index} className=\"block\" style={{\n                        borderColor: item.fail == \"true\" ? \"red\" : \"#dfdfdf\"\n                    }}>\r\n            <div className=\"blockinner\" style={{\n                        width: \"100%\",\n                        height: \"100%\",\n                        overflow: \"hidden\"\n                    }}>\r\n              <span className=\"reporate\">\r\n                <span className=\"inconWrap\">\r\n                  {!this.props.disabled && (<Icon className=\"icons\" type=\"delete\" onClick={() => {\n                        this.deleteFile(item.url);\n                    }}/>)}\r\n                  <Icon className=\"icons\" type=\"eye-o\" onClick={() => {\n                        this.showMaodal(item.url, natureSizeWidth);\n                    }}/>\r\n                </span>\r\n              </span>\r\n\r\n              <p className={` $\"uploadState} ${item.fail == \"true\" ? \"error\" : \"\"}`}>\r\n                {mess}\r\n              </p>\r\n              <img style={{ width: \"100%\", height: \"auto\" }} src={item.url}/>\r\n            </div>\r\n          </div>);\n                });\n            }\n        };\n    }\n    componentDidMount() { }\n    componentWillReceiveProps(nextProps) {\n        // Should be a controlled component.\n        console.log(\"nextProps\");\n        console.log(nextProps);\n        if (\"uploadMess\" in nextProps && nextProps.uploadMess) {\n            const value = nextProps.value\n                ? nextProps.value.toString()\n                : nextProps.value;\n            this.setState({\n                uploadMess: nextProps.uploadMess\n            });\n            // this.changeV(this.state.uploadMess,nextProps.uploadMess)\n        }\n    }\n    render() {\n        const { previewVisible, previewImage, modalwiddth } = this.state;\n        let showWidth = modalwiddth ? (modalwiddth < 400 ? 500 : modalwiddth) : 500;\n        showWidth =\n            showWidth > document.body.clientWidth\n                ? document.body.clientWidth\n                : showWidth;\n        const limit = this.props.limit;\n        const limituploadMess = this.state.uploadMess;\n        let pRadio = this.props.radio;\n        let aspectRatio = 1;\n        if (pRadio) {\n            if (pRadio == \"square\") {\n                aspectRatio = 1;\n            }\n            else if (pRadio == \"wide\") {\n                aspectRatio = 16 / 9;\n            }\n            else {\n                let datas = pRadio.split(\"/\");\n                if (datas && datas.length == 2) {\n                    let left = Number(datas[0]) * 1;\n                    let right = Number(datas[1]) * 1;\n                    aspectRatio = left / right;\n                }\n            }\n        }\n        const modalProps = {\n            aspectRatio: aspectRatio,\n            modalVisible: this.state.editImageModalVisible,\n            handleAdd: (fileCrop) => {\n                this.setState({\n                    fileCrop: fileCrop\n                });\n                console.log(fileCrop);\n                console.log(getObjectURL(fileCrop));\n                // if (this.fileUp) {\n                //   //this.fileUp.value = fileCrop;\n                // }\n                let urls = getObjectURL(fileCrop);\n                let uploadMess = this.state.uploadMess;\n                this.setState({\n                    editImageModalVisible: false,\n                    coperurl: urls\n                });\n                if (urls) {\n                    this.startLoading(uploadMess, urls);\n                }\n                if (fileCrop) {\n                    this.uploadImagsAli(fileCrop, uploadMess);\n                }\n            },\n            handleModalVisible: () => {\n                this.setState({\n                    editImageModalVisible: false\n                });\n            },\n            imgSrc: this.state.imgSrc\n        };\n        return (<div className=\"ali_upload\">\r\n        <ImageModal {...modalProps}/>\r\n        {this.props.tips && this.props.tips()}\r\n        {this.uploadImageElement(this.state.uploadMess)}\r\n        {((limit && limituploadMess && limituploadMess.length < limit) ||\n            !limit ||\n            !limituploadMess) &&\n            !this.props.disabled && (<a href=\"javascript:;\" className=\"upload\">\r\n              <Icon type=\"plus\"/>\r\n              上传图片\r\n              <input type=\"file\" id={this.state.id} className=\"change\" onChange={this.uploadImags}/>\r\n            </a>)}\r\n\r\n        <Modal width={showWidth} maskClosable={true} visible={previewVisible} footer={null} onCancel={this.handleCancel}>\r\n          <img alt=\"example\" style={{ width: \"100%\", maxWidth: \"100%\" }} src={previewImage}/>\r\n        </Modal>\r\n      </div>);\n    }\n}\nexport default UploadImages;\n"],"file":"uploadImage.js"}